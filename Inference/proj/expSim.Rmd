---
title: "Exponential Simulation"
output: pdf_document
author: vpipkt
date: March 2015
---

##Overview

2-3 sentence abstract. Note the page limit overall is 3 pages!!

## Simulations
Include English explanations of the simulations you ran

In this project you will investigate the exponential distribution in R and compare it with the Central Limit Theorem. The exponential distribution can be simulated in R with `rexp(n, lambda)` where `lambda` is the rate parameter. The mean of exponential distribution is 1/lambda and the standard deviation is also 1/lambda. Set `lambda = 0.2` for all of the simulations. You will investigate the distribution of averages of 40 exponentials. Note that you will need to do a thousand simulations.

```{r sim}
lambda <- 0.2
n <- 1000
m <- 40 
theoMean <- lambda ^ -1
theoVar <-  lambda ^ -2 / m  

set.seed(272727)
simData <- sapply(seq_len(n), function(x){mean(rexp(m,lambda))} )
mean(simData)
var(simData)
```

## Sample Mean Versus Theoretical Mean
Given the large sample size, it is reasonable to use kernel density estimation to describe the distribution of the means of the simulated data. This technique gives a smooth portrayal of the data with the same interpretation as a histogram. 

```{r mean}
library(ggplot2)
library(xtable)

means <- data.frame(MeanType = as.factor(c("Theoretical","Sample")),
           vals = c(theoMean,mean(simData)))

p<- ggplot(data.frame(sim=simData),aes(x=sim)) 
p + geom_density(col="red",size=2,name="Sample Density")  +
    geom_vline(data=means, aes(xintercept = vals, linetype=MeanType, color=MeanType), 
               show_guide=TRUE) +
    annotate("text", label=mean(simData), x= mean(simData), y=0 )
```
```{r printMean, results='asis'}
print(xtable(means,digits=4),type="latex", comment=FALSE)
```

###todo add abline value text labels?; make nicer labels on axis/title

The range of the observations is fairly wide. The sample mean is quite close to the theoretical mean. I conduct an inference test at the 95% significance level. The  null hypothesis that the sample mean is equal to the theoretical mean (5.0) using the not equal alternate hypothesis. The assumption is tha the central limit theorem applies.

```{r meanInfTest}
critical <- c(qnorm(0.05/2), qnorm(1-0.05/2))
z <- (mean(simData) - theoMean) / (theoVar / sqrt(n))
p <- pnorm(z)
critical 
z
```

Observe the test statistic `z` is within the critical values. I conclude that the test conclusion is fail to reject the null hypothesis. The p-value for this test is `r p`.


## Sample Variance Versus Theoretical Variance

2. Show how variable the sample is (via variance) and compare it to the theoretical variance of the distribution.

Maybe use an f test here?

3. Show that the distribution is approximately normal.

In point 3, focus on the difference between the distribution of a large collection of random exponentials and the distribution of a large collection of averages of 40 exponentials. 